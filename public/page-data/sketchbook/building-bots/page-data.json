{"componentChunkName":"component---src-templates-generic-post-js","path":"/sketchbook/building-bots/","result":{"data":{"markdownRemark":{"html":"<p>Through this walkthrough, you should have a discord bot, hosted on either your local machine, or through the online IDE Repl.it. This tutorial just builds upon a few existing online resources that you can directly reference, if you would prefer.</p>\n<ul>\n<li><a href=\"https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz\">Building a Discord bot with Python and Repl.it</a></li>\n<li><a href=\"https://realpython.com/how-to-make-a-discord-bot-python/#interacting-with-discord-apis\">How to make a Discord Bot in Python</a></li>\n</ul>\n<h2>Create app in the Discord UI</h2>\n<ol>\n<li>Sign up for a free <a href=\"https://discord.com/\">Discord</a> account</li>\n<li>Go to the <a href=\"https://discord.com/developers/applications\">Discord developer portal</a> and click on the 'New Application' button.</li>\n</ol>\n<p>You will now be redirected to a page where you can configre all the options for your app, creating a bot user and more.</p>\n<ol>\n<li>Click on the \"Bot\" tab, press the \"Add Bot\" button</li>\n<li>Scroll down to the 'Privileged Gateway Intents' section, and turn on the 'Message Content Intent' switch.</li>\n</ol>\n<p>Now you have to add your bot to the discord servers you want it to run in. For this project, we'll add all of our bots to the server I've created 'A Place to Talk to Bots'</p>\n<ol>\n<li>Use the invite link to join the project server: <a href=\"https://discord.gg/qteg27c6vM\">https://discord.gg/qteg27c6vM</a></li>\n<li>Go back to your application in the <a href=\"https://discord.com/developers/applications\">Discord developer portal</a></li>\n<li>Navigate to the 'OAuth2 -> URL Generator' tab</li>\n<li>Under 'Scopes' check the 'bot' option</li>\n<li>In the Bot permissions section, check all the things that you would like to give your bot access to. Some of the permissions you would likely want to set:\n<ol>\n<li>Read Messages/View Channels</li>\n<li>Send Messages</li>\n<li>Send Messages in Threads</li>\n<li>Read Message History</li>\n</ol>\n</li>\n<li>Copy the Generated URL at the bottom of the page and paste it into your browser.</li>\n<li>You will see a page asking you which server to add this bot to. Select the 'A Place to Talk to Bots' server.</li>\n<li>Click authorize</li>\n<li>Once you hit accept, you should get a notification that your bot has joined the server. You can see the bot listed as a member of the server in the right panel.</li>\n</ol>\n<h2>Building Bot Behavior</h2>\n<p>In this tutorial, there are two options for running the code for your bot. You can run the code locally on your machine, or you can use an online IDE like Repl.it</p>\n<p>Repl.it is simpler to setup and get started, and will include hosting, so you can keep your bot online all the time. However, there are storage, CPU and RAM limitations that might get in the way.</p>\n<p>A local machine setup will be slightly more complicated if you don't have python already setup, and if you close your computer, your bot will go offline. But, you won't face as many of the resource limitations as you will with Repl.it.</p>\n<p>I reccomend starting with Repl.it, and then moving over to a local setup if necessary in the future.</p>\n<h3>Setup Repl.it</h3>\n<ol>\n<li>Make an account on Repl.it</li>\n<li>Click on the Create Button</li>\n<li>Select 'python' under Template, give your project a name, and then click 'Create Repl'</li>\n</ol>\n<p>Before we start writing code, we have to add the Discord Bot Token to our Repl.it project. This will connect our code to the Bot we created.</p>\n<ol start=\"4\">\n<li>Add the Discord Bot Token to the 'Secrets' tab of Repl.it.\n<ol>\n<li>Go to the <a href=\"https://discord.com/developers/applications\">Discord Developer Portal</a>, click on the Application you created earlier</li>\n<li>Navigate to the Bot tab, and under the 'Token' section, click on the copy button. (If the copy button doesn't appear, click on the 'Reset Token' button)</li>\n<li>In your Repl.it project, click on the 'Secrets' tool under Tools section in the sidebar.</li>\n<li>Create a New Secret. Name the key <code class=\"language-text\">DISCORD_BOT_SECRET</code> and in the value field paste the Token that you copied from the Discord Developer Portal.</li>\n</ol>\n</li>\n</ol>\n<p>Finally, lets install the main packages that we will be using. You can use this same process to install other useful python packages in the future.</p>\n<ol start=\"5\">\n<li>Click on the packages tool under the Tools section in the sidebar</li>\n<li>In the new Packages pane, search for <strong>discord.py</strong>, and click on the plus icon to install the library.</li>\n</ol>\n<h3>Setup Local Environment</h3>\n<h3>Create Hello World Bot</h3>\n<p>To actually create our Hello World bot, we'll have to write some python code into our main.py file.</p>\n<ol>\n<li>Let's start by importing the necessary libraries:\n<ul>\n<li>The <strong>discord.py package</strong> is the main way we will be working with the Discord API. (<a href=\"https://discordpy.readthedocs.io/en/stable/\">documentation</a>)</li>\n<li>The <strong>os module</strong> is a standard library (so you don't need to install it) but it isn't included by default, so you have to import it.</li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> discord\n<span class=\"token keyword\">import</span> os</code></pre></div>\n<ol start=\"2\">\n<li>\n<p>Next let's define our bot's <strong>\"intents.\"</strong> This is an object that we define to tell Discord what events our bots wants to listen to. For our bot, we want all the message_content events.</p>\n<p>(See the documentation <a href=\"https://discordpy.readthedocs.io/en/stable/api.html#intents\">here</a> for a list of all the intents.)</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Create an empty intents object</span>\nintents <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Intents<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Set all required intents True</span>\nintents<span class=\"token punctuation\">.</span>message_content <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></code></pre></div>\n<ol start=\"3\">\n<li>Now, lets <strong>create our Client</strong> object using the intents we just created</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">client <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">(</span>intents<span class=\"token operator\">=</span>intents<span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"4\">\n<li>Now we can start creating our different event callbacks. This is where most of the logic of our chatbot will go. The first callback we'll use is the <strong>on_ready</strong> callback, which is called when our bot first gets online. Once the bot connects, we print out the bot's username.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_ready</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'We have logged in as </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"5\">\n<li>The next callback we'll use is <strong>on_message</strong> which is called whenever a message is sent on the discord server.\n<ol>\n<li>First, we check what user has sent the message. Because we don't want the bot to respond to itself, we skip if the user who sent the message is the bot itself.</li>\n<li>Then we check the content of the message. If it starts with the text '$hello', then we want to respond. <em>Edit this string to change how the bot is triggered</em></li>\n<li>To respond, we grab the channel that the message was sent to, and then send our 'Hello' to that same channel. <em>Change that string to change how your bot responds.</em></li>\n</ol>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_message</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># Check the user who sent the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>author <span class=\"token operator\">==</span> client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span>\n\n\t<span class=\"token comment\"># Check the content of the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'$hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t    <span class=\"token comment\"># Send our response</span>\n        <span class=\"token keyword\">await</span> message<span class=\"token punctuation\">.</span>channel<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span>\n      </code></pre></div>\n<ol start=\"6\">\n<li>The last step is to <strong>run the Client</strong>. To do this, we'll need to get our Bot Token that we saved into the Repl.it secrets or in our .env file, and then pass that into our client. We will use the 'os' library to access that secret variable.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">token <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"DISCORD_BOT_SECRET\"</span><span class=\"token punctuation\">)</span>\nclient<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"7\">\n<li>Finally, run your python file to see your Hello World bot come online in the discord server, and respond to anyone who types '$hello'\n<ol>\n<li><em>Repl.it</em>: Press the green play button at the top of the page</li>\n<li><em>Local machine</em>: Run the command <code class=\"language-text\">python main.py</code> from the project folder in your terminal.</li>\n</ol>\n</li>\n</ol>\n<p>You can copy paste the full main.py file below or fork the file from my example Repl.it: <a href=\"https://replit.com/@andoncemore/Basic-Discord-Bot#main.py\">https://replit.com/@andoncemore/Basic-Discord-Bot#main.py</a></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> discord\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token comment\"># Create an empty intents object</span>\nintents <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Intents<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Set all required intents True</span>\nintents<span class=\"token punctuation\">.</span>message_content <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\nclient <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">(</span>intents<span class=\"token operator\">=</span>intents<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_ready</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'We have logged in as </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_message</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># Check the user who sent the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>author <span class=\"token operator\">==</span> client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span>\n\n\t<span class=\"token comment\"># Check the content of the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'$hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t    <span class=\"token comment\"># Send our response</span>\n        <span class=\"token keyword\">await</span> message<span class=\"token punctuation\">.</span>channel<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span>\n\ntoken <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"DISCORD_BOT_SECRET\"</span><span class=\"token punctuation\">)</span>\nclient<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Keep bot alive (Repl.it only)</h3>\n<p>Source: <a href=\"https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz\">https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz</a></p>\n<p>When using Repl.it, your bot will only stay online as long as you keep the browser tab open. There are two ways to keep your bot alive:</p>\n<ol>\n<li>\n<p><strong>Use the \"Always On\" Feature</strong>. This will cost \"20 cycles/day\" where a cycle is a token you buy from Repl.it for $0.01/cycle. So keeping your Repl \"always on\" will cost you $0.20 a day.</p>\n</li>\n<li>\n<p><strong>Create a web server and ping the web server every hour.</strong> Repl.it will keep your code running if it is running a web server. If your web server doesn't get any traffic for one hour, it will stop the code. We can then use Uptime Bot to ping the web server every hour to keep it alive.</p>\n</li>\n</ol>\n<p>Create a new file in the project called <code class=\"language-text\">keep_alive.py</code></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask \n<span class=\"token keyword\">from</span> threading <span class=\"token keyword\">import</span> Thread \n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">def</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"I'm alive\"</span> \n\n<span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\tapp<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span>port<span class=\"token operator\">=</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token keyword\">def</span> <span class=\"token function\">keep_alive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\tt <span class=\"token operator\">=</span> Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>run<span class=\"token punctuation\">)</span> \n\tt<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>in your main file, import the keep_alive snippet you just created.</p>\n<p><code class=\"language-text\">from keep_alive import keep_alive</code></p>\n<p>and then run the keep_alive function at the top of the file.</p>\n<h2>Working with discord.py</h2>\n<p>The discord.py library documentation will have the most comprehensive description of all the features of the library, but I've written out some helpful tips some common behaviors.</p>\n<p><strong>Guild vs DM</strong>\nAs a note, in the documentation, you will notice references to Guilds and DMs. A guild is another word for server. The variation in intents (from messages, guild_messages, dm_messages) lets you specify where the bot can listen to messages (everywhere, in the server, or in the DMs)</p>\n<h3>Creating UI Elements</h3>\n<h4>Buttons</h4>\n<h4>Modals</h4>\n<h4>Dropdowns</h4>","frontmatter":{"title":"building a discord bot","subtitle":null,"updated":"Jan 25, 2024","tags":["how-to"],"thumbnail":null}}},"pageContext":{"id":"935f82fa-a9e4-5421-ae5d-cb4216ee5fb6","html":"<p>Through this walkthrough, you should have a discord bot, hosted on either your local machine, or through the online IDE Repl.it. This tutorial just builds upon a few existing online resources that you can directly reference, if you would prefer.</p>\n<ul>\n<li><a href=\"https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz\">Building a Discord bot with Python and Repl.it</a></li>\n<li><a href=\"https://realpython.com/how-to-make-a-discord-bot-python/#interacting-with-discord-apis\">How to make a Discord Bot in Python</a></li>\n</ul>\n<h2>Create app in the Discord UI</h2>\n<ol>\n<li>Sign up for a free <a href=\"https://discord.com/\">Discord</a> account</li>\n<li>Go to the <a href=\"https://discord.com/developers/applications\">Discord developer portal</a> and click on the 'New Application' button.</li>\n</ol>\n<p>You will now be redirected to a page where you can configre all the options for your app, creating a bot user and more.</p>\n<ol>\n<li>Click on the \"Bot\" tab, press the \"Add Bot\" button</li>\n<li>Scroll down to the 'Privileged Gateway Intents' section, and turn on the 'Message Content Intent' switch.</li>\n</ol>\n<p>Now you have to add your bot to the discord servers you want it to run in. For this project, we'll add all of our bots to the server I've created 'A Place to Talk to Bots'</p>\n<ol>\n<li>Use the invite link to join the project server: <a href=\"https://discord.gg/qteg27c6vM\">https://discord.gg/qteg27c6vM</a></li>\n<li>Go back to your application in the <a href=\"https://discord.com/developers/applications\">Discord developer portal</a></li>\n<li>Navigate to the 'OAuth2 -> URL Generator' tab</li>\n<li>Under 'Scopes' check the 'bot' option</li>\n<li>In the Bot permissions section, check all the things that you would like to give your bot access to. Some of the permissions you would likely want to set:\n<ol>\n<li>Read Messages/View Channels</li>\n<li>Send Messages</li>\n<li>Send Messages in Threads</li>\n<li>Read Message History</li>\n</ol>\n</li>\n<li>Copy the Generated URL at the bottom of the page and paste it into your browser.</li>\n<li>You will see a page asking you which server to add this bot to. Select the 'A Place to Talk to Bots' server.</li>\n<li>Click authorize</li>\n<li>Once you hit accept, you should get a notification that your bot has joined the server. You can see the bot listed as a member of the server in the right panel.</li>\n</ol>\n<h2>Building Bot Behavior</h2>\n<p>In this tutorial, there are two options for running the code for your bot. You can run the code locally on your machine, or you can use an online IDE like Repl.it</p>\n<p>Repl.it is simpler to setup and get started, and will include hosting, so you can keep your bot online all the time. However, there are storage, CPU and RAM limitations that might get in the way.</p>\n<p>A local machine setup will be slightly more complicated if you don't have python already setup, and if you close your computer, your bot will go offline. But, you won't face as many of the resource limitations as you will with Repl.it.</p>\n<p>I reccomend starting with Repl.it, and then moving over to a local setup if necessary in the future.</p>\n<h3>Setup Repl.it</h3>\n<ol>\n<li>Make an account on Repl.it</li>\n<li>Click on the Create Button</li>\n<li>Select 'python' under Template, give your project a name, and then click 'Create Repl'</li>\n</ol>\n<p>Before we start writing code, we have to add the Discord Bot Token to our Repl.it project. This will connect our code to the Bot we created.</p>\n<ol start=\"4\">\n<li>Add the Discord Bot Token to the 'Secrets' tab of Repl.it.\n<ol>\n<li>Go to the <a href=\"https://discord.com/developers/applications\">Discord Developer Portal</a>, click on the Application you created earlier</li>\n<li>Navigate to the Bot tab, and under the 'Token' section, click on the copy button. (If the copy button doesn't appear, click on the 'Reset Token' button)</li>\n<li>In your Repl.it project, click on the 'Secrets' tool under Tools section in the sidebar.</li>\n<li>Create a New Secret. Name the key <code class=\"language-text\">DISCORD_BOT_SECRET</code> and in the value field paste the Token that you copied from the Discord Developer Portal.</li>\n</ol>\n</li>\n</ol>\n<p>Finally, lets install the main packages that we will be using. You can use this same process to install other useful python packages in the future.</p>\n<ol start=\"5\">\n<li>Click on the packages tool under the Tools section in the sidebar</li>\n<li>In the new Packages pane, search for <strong>discord.py</strong>, and click on the plus icon to install the library.</li>\n</ol>\n<h3>Setup Local Environment</h3>\n<h3>Create Hello World Bot</h3>\n<p>To actually create our Hello World bot, we'll have to write some python code into our main.py file.</p>\n<ol>\n<li>Let's start by importing the necessary libraries:\n<ul>\n<li>The <strong>discord.py package</strong> is the main way we will be working with the Discord API. (<a href=\"https://discordpy.readthedocs.io/en/stable/\">documentation</a>)</li>\n<li>The <strong>os module</strong> is a standard library (so you don't need to install it) but it isn't included by default, so you have to import it.</li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> discord\n<span class=\"token keyword\">import</span> os</code></pre></div>\n<ol start=\"2\">\n<li>\n<p>Next let's define our bot's <strong>\"intents.\"</strong> This is an object that we define to tell Discord what events our bots wants to listen to. For our bot, we want all the message_content events.</p>\n<p>(See the documentation <a href=\"https://discordpy.readthedocs.io/en/stable/api.html#intents\">here</a> for a list of all the intents.)</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Create an empty intents object</span>\nintents <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Intents<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Set all required intents True</span>\nintents<span class=\"token punctuation\">.</span>message_content <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></code></pre></div>\n<ol start=\"3\">\n<li>Now, lets <strong>create our Client</strong> object using the intents we just created</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">client <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">(</span>intents<span class=\"token operator\">=</span>intents<span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"4\">\n<li>Now we can start creating our different event callbacks. This is where most of the logic of our chatbot will go. The first callback we'll use is the <strong>on_ready</strong> callback, which is called when our bot first gets online. Once the bot connects, we print out the bot's username.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_ready</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'We have logged in as </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"5\">\n<li>The next callback we'll use is <strong>on_message</strong> which is called whenever a message is sent on the discord server.\n<ol>\n<li>First, we check what user has sent the message. Because we don't want the bot to respond to itself, we skip if the user who sent the message is the bot itself.</li>\n<li>Then we check the content of the message. If it starts with the text '$hello', then we want to respond. <em>Edit this string to change how the bot is triggered</em></li>\n<li>To respond, we grab the channel that the message was sent to, and then send our 'Hello' to that same channel. <em>Change that string to change how your bot responds.</em></li>\n</ol>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_message</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># Check the user who sent the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>author <span class=\"token operator\">==</span> client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span>\n\n\t<span class=\"token comment\"># Check the content of the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'$hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t    <span class=\"token comment\"># Send our response</span>\n        <span class=\"token keyword\">await</span> message<span class=\"token punctuation\">.</span>channel<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span>\n      </code></pre></div>\n<ol start=\"6\">\n<li>The last step is to <strong>run the Client</strong>. To do this, we'll need to get our Bot Token that we saved into the Repl.it secrets or in our .env file, and then pass that into our client. We will use the 'os' library to access that secret variable.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">token <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"DISCORD_BOT_SECRET\"</span><span class=\"token punctuation\">)</span>\nclient<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"7\">\n<li>Finally, run your python file to see your Hello World bot come online in the discord server, and respond to anyone who types '$hello'\n<ol>\n<li><em>Repl.it</em>: Press the green play button at the top of the page</li>\n<li><em>Local machine</em>: Run the command <code class=\"language-text\">python main.py</code> from the project folder in your terminal.</li>\n</ol>\n</li>\n</ol>\n<p>You can copy paste the full main.py file below or fork the file from my example Repl.it: <a href=\"https://replit.com/@andoncemore/Basic-Discord-Bot#main.py\">https://replit.com/@andoncemore/Basic-Discord-Bot#main.py</a></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> discord\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token comment\"># Create an empty intents object</span>\nintents <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Intents<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Set all required intents True</span>\nintents<span class=\"token punctuation\">.</span>message_content <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\nclient <span class=\"token operator\">=</span> discord<span class=\"token punctuation\">.</span>Client<span class=\"token punctuation\">(</span>intents<span class=\"token operator\">=</span>intents<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_ready</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'We have logged in as </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@client<span class=\"token punctuation\">.</span>event</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">on_message</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># Check the user who sent the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>author <span class=\"token operator\">==</span> client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span>\n\n\t<span class=\"token comment\"># Check the content of the message</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'$hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t    <span class=\"token comment\"># Send our response</span>\n        <span class=\"token keyword\">await</span> message<span class=\"token punctuation\">.</span>channel<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span>\n\ntoken <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"DISCORD_BOT_SECRET\"</span><span class=\"token punctuation\">)</span>\nclient<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Keep bot alive (Repl.it only)</h3>\n<p>Source: <a href=\"https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz\">https://www.codementor.io/@garethdwyer/building-a-discord-bot-with-python-and-repl-it-miblcwejz</a></p>\n<p>When using Repl.it, your bot will only stay online as long as you keep the browser tab open. There are two ways to keep your bot alive:</p>\n<ol>\n<li>\n<p><strong>Use the \"Always On\" Feature</strong>. This will cost \"20 cycles/day\" where a cycle is a token you buy from Repl.it for $0.01/cycle. So keeping your Repl \"always on\" will cost you $0.20 a day.</p>\n</li>\n<li>\n<p><strong>Create a web server and ping the web server every hour.</strong> Repl.it will keep your code running if it is running a web server. If your web server doesn't get any traffic for one hour, it will stop the code. We can then use Uptime Bot to ping the web server every hour to keep it alive.</p>\n</li>\n</ol>\n<p>Create a new file in the project called <code class=\"language-text\">keep_alive.py</code></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask \n<span class=\"token keyword\">from</span> threading <span class=\"token keyword\">import</span> Thread \n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">def</span> <span class=\"token function\">home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"I'm alive\"</span> \n\n<span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\tapp<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span>port<span class=\"token operator\">=</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token keyword\">def</span> <span class=\"token function\">keep_alive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\tt <span class=\"token operator\">=</span> Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>run<span class=\"token punctuation\">)</span> \n\tt<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>in your main file, import the keep_alive snippet you just created.</p>\n<p><code class=\"language-text\">from keep_alive import keep_alive</code></p>\n<p>and then run the keep_alive function at the top of the file.</p>\n<h2>Working with discord.py</h2>\n<p>The discord.py library documentation will have the most comprehensive description of all the features of the library, but I've written out some helpful tips some common behaviors.</p>\n<p><strong>Guild vs DM</strong>\nAs a note, in the documentation, you will notice references to Guilds and DMs. A guild is another word for server. The variation in intents (from messages, guild_messages, dm_messages) lets you specify where the bot can listen to messages (everywhere, in the server, or in the DMs)</p>\n<h3>Creating UI Elements</h3>\n<h4>Buttons</h4>\n<h4>Modals</h4>\n<h4>Dropdowns</h4>","imageList":[]}},"staticQueryHashes":["1219129885"],"slicesMap":{}}